<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin the Wheel - Win Prizes!</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        .wheel-container { position: relative; display: inline-block; }
        .wheel { width: 300px; height: 300px; border-radius: 50%; border: 5px solid #000; }
        .spin-btn { margin-top: 20px; padding: 10px 20px; font-size: 18px; cursor: pointer; display: none; }
        .message { margin-top: 20px; font-size: 20px; font-weight: bold; }
        .input-container { margin-top: 20px; }
        .disabled { background-color: grey; cursor: not-allowed; }
        .disclaimer { font-size: 14px; color: red; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Spin the Wheel & Win Prizes!</h1>
    <div class="input-container">
        <p id="entryMessage">Enter the special code to play:</p>
        <input type="text" id="accessCode" placeholder="Enter Code">
        <button onclick="checkAccess()">Submit</button>
    </div>
    <div class="wheel-container" style="display: none;">
        <canvas id="wheelCanvas" width="300" height="300"></canvas>
    </div>
    <button class="spin-btn" id="spinButton" onclick="spinWheel()">Spin Now</button>
    <p class="message" id="resultMessage"></p>
    <p id="referralMessage" style="display:none;">Share this link to get another spin: <span id="referralLink"></span></p>
    <p class="disclaimer">This is a fun game. Prizes are limited and not guaranteed.</p>
    
    <script>
        let allowedUsers = 100;
        let enteredUsers = 0;
        const specialCode = "SECRET123";
        const spinKey = "lastSpinTime";
        
        function checkAccess() {
            const userCode = document.getElementById("accessCode").value;
            if (enteredUsers < allowedUsers || userCode === specialCode) {
                document.querySelector(".input-container").style.display = "none";
                document.querySelector(".wheel-container").style.display = "block";
                document.querySelector(".spin-btn").style.display = "block";
                enteredUsers++;
                checkSpinLimit();
            } else {
                document.getElementById("entryMessage").innerText = "Access Denied! Only special code users can enter now.";
            }
        }
        
        function checkSpinLimit() {
            const lastSpin = localStorage.getItem(spinKey);
            const now = new Date().getTime();
            const oneDay = 24 * 60 * 60 * 1000;
            
            if (lastSpin && now - lastSpin < oneDay) {
                document.getElementById("spinButton").disabled = true;
                document.getElementById("spinButton").classList.add("disabled");
                document.getElementById("resultMessage").innerText = "You can spin again tomorrow! Or use referral to play now.";
                showReferralLink();
            }
        }
        
        function spinWheel() {
            localStorage.setItem(spinKey, new Date().getTime());
            document.getElementById("resultMessage").innerText = "Spinning...";
            
            setTimeout(() => {
                let randomNumber = Math.random();
                let result;
                
                if (randomNumber < 0.01) {
                    result = "₹1"; // 1 in 100 chance
                } else if (randomNumber < 0.002) {
                    result = "₹5"; // 1 in 500 chance
                } else {
                    result = "Better Luck Next Time"; // 99.8% chance
                }
                
                document.getElementById("resultMessage").innerText = result;
                document.getElementById("spinButton").disabled = true;
                document.getElementById("spinButton").classList.add("disabled");
                showReferralLink();
            }, 3000);
        }
        
        function showReferralLink() {
            document.getElementById("referralMessage").style.display = "block";
            const referralLink = window.location.href + "?ref=" + Math.random().toString(36).substr(2, 9);
            document.getElementById("referralLink").innerText = referralLink;
        }
        
        const wheelCanvas = document.getElementById("wheelCanvas");
        const ctx = wheelCanvas.getContext("2d");
        const segments = ["₹1", "₹5", "Better Luck Next Time", "Better Luck Next Time", "Better Luck Next Time", "Better Luck Next Time", "Better Luck Next Time", "Better Luck Next Time"];
        const colors = ["#f4a261", "#e76f51", "#d3d3d3", "#d3d3d3", "#d3d3d3", "#d3d3d3", "#d3d3d3", "#d3d3d3"];
        
        function drawWheel() {
            let startAngle = 0;
            const arc = (2 * Math.PI) / segments.length;
            
            for (let i = 0; i < segments.length; i++) {
                ctx.beginPath();
                ctx.fillStyle = colors[i];
                ctx.moveTo(150, 150);
                ctx.arc(150, 150, 150, startAngle, startAngle + arc);
                ctx.lineTo(150, 150);
                ctx.fill();
                ctx.stroke();
                ctx.fillStyle = "black";
                ctx.font = "16px Arial";
                ctx.fillText(segments[i], 120 + Math.cos(startAngle + arc / 2) * 100, 150 + Math.sin(startAngle + arc / 2) * 100);
                startAngle += arc;
            }
        }
        drawWheel();
        
        checkSpinLimit();
    </script>
</body>
</html>
